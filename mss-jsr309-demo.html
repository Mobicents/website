<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Mobicents Sip Servlets - </title>
    <link rel="stylesheet" href="./maven-mobicents-style.css" type="text/css">
    <meta name="author" content="Luka Cvrk (www.solucija.com)">
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
<body>
<script src="http://www.google-analytics.com/urchin.js"
	type="text/javascript">
	</script>

<script type="text/javascript">
	_uacct = "UA-212380-1";
	urchinTracker();
	</script>

<div class="content">
<div class="header">
<div class="top_info">
<div class="top_info_right"><!-- Search Google -->
<form method="get" action="http://www.google.com/custom" target="_top">

Search
<input name="q" maxlength="255" value="" type="text">
<input name="client" value="pub-5437763180786254" type="hidden">
<input name="forid" value="1" type="hidden">
<input name="channel" value="5452007684" type="hidden">
<input name="ie" value="ISO-8859-1" type="hidden">
<input name="oe" value="ISO-8859-1" type="hidden">
<input name="cof"
	value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1;"
	type="hidden">
<input name="hl" value="en" type="hidden">
<input name="q" value="mobicents" type="hidden">
</form>


</div>
<div class="top_info_left">The Open Source SLEE and SIP Server</div>
</div>

<div id="logo">
<h1><a href="http://www.mobicents.org/"
	title="Mobicents">Mobicents</a></h1>
</div>
</div>

<div
	class="bar">
	<ul>
		<li
			class="browse_category">Select Category:</li>
		<li>
			<a
				href="index.html"
				accesskey="h">Home</a>

		</li>
		<li
			class="active">
			<a
				href="products.html"
				accesskey="p">Products</a>
		</li>
		<li>
			<a
				href="services.html"
				accesskey="s">Services</a>
		</li>
		<li>

			<a
				href="community.html"
				accesskey="c">Community</a>
		</li>
		<li>
			<a
				href="partners.html"
				accesskey="r">Partners</a>
		</li>
		<li>
			<a
				href="faq.html"
				accesskey="c">FAQ</a>

		</li>
		<li><a href="http://www.mobicents.org/incubator.html" accesskey="i">Incubator</a></li>
		<li>
			<a
				href="about.html"
				accesskey="a">About Us</a>
		</li>
	</ul>
</div>

<div class="contentwrapper"><div class="left">
<h3 id="h3_2">Mobicents Sip Servlets</h3>
<div class="section"><h2>Media Example</h2>
<div class="section"><h3>Service Description</h3>
<p><i>Note : This application will only works on the Jboss container with the Mobicents Media Server 2.x installed on the Mobicents Sip Servlets for JBoss 5 version</i>
</p>
<p>This simple example shows how Sip Servlets can leverage JSR-309 API which provides multimedia application developers with a generic media server (MS) abstraction interface.<br />
JSR-309 defines a programming model and object model for MS control independent of MS control protocols.<br />
Media Server Control API is not an API for a specific protocol.<br />
It will take advantage of the multiple and evolving Multimedia Server (MS) capabilities available in the industry today and also provide an abstraction for commonly used application functions like multi party conferencing, multimedia mixing and interaction dialogs. </p>
<p>Some of the commonly used MS control protocols are MGCP (RFC 3435), MEGACO (RFC 3525), Media Server Markup Language (MSML) (RFC 4722) and VoiceXML.</p>
<p>The Mobicents implementation of JSR-309 API makes use of MGCP as MS control protocol. Look at bellow diagram for further understanding of layers involved</p>
<img src="./SipJSR309.jpeg" /><p>In above diagram the Sip Phone (UA) interacts with Sip-Servlets Application deployed on Sip Servlets Server using the SIP messages and exchanges the SDP.<br />
The Sip Servlets Application uses JSR-309 API which leverages MGCP to talk to Mobicents Media Server.<br />
Once the hand-shake is done, the RTP flows between the UA and MMS. </p>
<p>This example demonstartes the Announcement, DTMF Detection and Recording capabilities of MMS.<br />
The example is divided in 2 parts :</p>
<p><i>Part I</i>
 </p>
<ol type="1"><li>Dial 1010 from you SIP Phone (or you can dial 1010tts to test the TTS version of the demo)</li>
<li>You will hear an announcement (show casing the announcement capability)</li>
<li>Dial a DTMF from your SIP Phone, the DTMF is recognized by the media-jsr309-servlet example and MS is instructed to play corresponding Announcement (show casing the DTMF detection capability of MS)</li>
</ol>
<p><i>Part II</i>
 </p>
<ol type="1"><li>Dial 1011 from your SIP Phone</li>
<li>You will hear an announcement to start recording</li>
<li>Once announcement is over, speak on your mic and your voice gets recorded to Mobicents Media Server Home directory (showcasing recording capability). After few seconds you can disconnect and manually go to Mobicents Media Server home directory and play test.wav using your favorite player.</li>
</ol>
</div>
<div class="section"><h3>How to activate it</h3>
<div class="section"><h4>From the binary</h4>
<p>You can find the war file corresponding to this example <a href="https://repository.jboss.org/nexus/content/groups/public/org/mobicents/servlet/sip/example/media-jsr309-servlet/1.6.0.FINAL/media-jsr309-servlet-1.6.0.FINAL.war" class="externalLink">here</a>
.<br />
Drop the downloaded war file into your <tt>jboss_home/server/default/deploy</tt>
 directory </p>
<p>Get the corresponding <a href="/media-jsr309-dar.properties">dar configuration file</a>
.<br />
To understand what the dar configuration file is used for, check the <a href="./mss-dar.html">Application Router Documentation</a>
.<br />
Drop it in your <tt>jboss_home/server/default/conf/dars</tt>
 directory.<br />
To use this dar file for this service, specify in the Service xml tag, darConfigurationFileLocation attribute of the <tt>jboss_home/server/default/deploy/jbossweb.sar/server.xml</tt>
, the following :<br />
<tt>conf/dars/media-jsr309-dar.properties</tt>
</p>
<p>You can now run your Jboss container.</p>
</div>
<div class="section"><h4>From the source</h4>
<p>Please check out the media-jsr309 example located under this <a href="http://code.google.com/p/mobicents/source/browse/trunk/servers/sip-servlets/sip-servlets-examples/media-jsr309-servlet" class="externalLink">location</a>
 from the svn repository. Follow the instructions in the <a href="http://code.google.com/p/mobicents/source/browse/trunk/servers/sip-servlets/sip-servlets-examples/media-jsr309-servlet/README.TXT" class="externalLink">README.txt</a>
 to build and run the example. </p>
</div>
</div>
<div class="section"><h3>How to play with it</h3>
<p>First you need to have Mobicents Media Server (MMS) up and running. Go to $JBOSS_HOME/mobicents-media-server/bin and type sudo sh run.sh (sudo is needed because RTSP starts on port below 1024 which requires root privilege on linux) or run.bat on windows</p>
<p>Then start up Mobicents Sip Servlets. </p>
<p>Just dial the servlet directly as explained in below steps, without any proxy. Tested with Twinkle</p>
<ol type="1"><li>Dial 1010 to test Announcement and DTMF Detection</li>
<li>Dial 1011 to test Recording</li>
</ol>
</div>
</div>

</div>

<div class="right">
<h3>Mobicents Sip Servlets</h3>
<div class="right_articles">
          <h5>Overview</h5>
            <ul>
              
    <li class="none">
                    <a href="http://code.google.com/p/sipservlets/" class="externalLink">Introduction</a>
          </li>
              
    <li class="none">
                    <a href="http://code.google.com/p/sipservlets/wiki/Downloads" class="externalLink">Downloads</a>
          </li>
              
    <li class="none">
                    <a href="http://goo.gl/xmPp4" class="externalLink">Roadmap</a>
          </li>
          </ul>
              <h5>Documentation</h5>
            <ul>
              
    <li class="none">
                    <a href="http://code.google.com/p/sipservlets/wiki/Welcome?tm=6" class="externalLink">Community Documentation</a>
          </li>
          </ul>
      </div>
<div align="center">
<a href="http://www.jboss.org/jopr/"><img src="http://www.jboss.org/dms/jopr/images/managedbyjopr_badge_gold.png"/></a>
</div>
</div>
</div>
<div class="footer">   
  </div>
  <div id="footer">
    <div>
      <div align="center"><a href="http://www.redhat.com/"><img  src="logo_rh_home.png" alt=" Red Hat" border="0" height="31" width="96" /></a><br />
      </div>
    </div>
    <div align="center">&copy; 2008 Red Hat Middleware, LLC. All rights reserved. <a href="http://www.jboss.com/privacy_policy">Privacy Policy</a></div> </div>
</div>
  </body>
</html>
